# プロジェクト名
視聴ロックマン

## 概要
各ユーザーが指定した特定のチャンネルの動画のみを視聴できるサイト.
チャンネルを複数登することができ、「仕事」「学習」「リフレッシュ」「趣味」などのカテゴリに分けることができる.

## 背景
日々のYoutube視聴で、関係ない動画を見てしまうのを防ぐために特定のチャンネルのみの動画を視聴できるようにする.
時間指定（ex: 9:00~18:00）で「仕事」のカテゴリのみを視聴することができ、その他の時間には他のカテゴリの動画を視聴することができるようにする

## 機能要件
* ユーザー管理
    - ログイン機能
    - ユーザー登録
    - 各ユーザーによる個別に登録チャンネル、カテゴリー分け
* チャンネル管理
    - 曖昧検索によるチャンネル検索、登録
    - チャンネルの削除
    - 登録可能チャンネル数はカテゴリーに応じて設定可能
        - ex) 「仕事」10件・「リフレッシュ」20件
* 時間制限
    - 10分間隔での指定
    - 曜日別の設定
    - タイムゾーンの考慮
    - 時間外アクセスでは完全ロック
* 動画視聴
    - 埋め込み型で動画再生
    - 動画の並び順は投稿日順
    - 動画の曖昧検索
    - 視聴履歴の確認はなし

## 日機能要件
* セキュリティ
    - YouTube API クォータ数上限: 10000/1日
    - API keyは.envファイルにて管理
    - ユーザーのemail, passwordのパッシュ化 

    * 追加項目
        - JWT トークンでの認証（有効期限: 24時間）
        - CORS設定でフロントエンドドメインのみ許可
        - レート制限: ユーザー毎のAPI呼び出し制限
        - 入力値検証: チャンネルURL、検索クエリのサニタイズ
* パフォーマンス
    * 動画メタデータのキャッシュ
        - チャンネルの動画リスト: 6時間キャッシュ（新着動画の取得頻度を考慮）
        - 動画詳細情報: 24時間キャッシュ（タイトル、説明文など）
        - チャンネル情報: 1週間キャッシュ（チャンネル名、アイコンなど）
    * API呼び出し最適化
        - バッチ処理で複数チャンネルの動画を一度に取得
        - ユーザーのアクティブ時間帯に合わせた事前キャッシュ
        - Redis使用でキャッシュ管理

## データベース設計
db-design.mdを参照

## エラーハンドリング
* API制限対応
    - 日次クォータ残量の監視
    - 制限近接時の警告表示
    - 制限到達時のキャッシュデータでの代替表示  
* ログ管理
    - アプリケーションログ: Spring Boot Logback
    - API呼び出しログ: 成功/失敗、レスポンス時間
    - ユーザー行動ログ: チャンネル登録、動画視聴開始

## UI/UX設計
ui/ux-design.mdを参照

## api設計
api-design.mdを参照

## 技術スタック
|  　　　　　 | 　　　　　 |
|:----------|:---------|
|フロントエンド | Next.js(React) |
|バックエンド  | Java(Spring Boot, Spring Security) |
|DB | Postgres |
|ローカル環境構築 | docker |

## 開発環境
```md
docker-compose.yml:
Next.js (port: 3000)
Spring Boot (port: 8080)
PostgreSQL (port: 5432)
Redis (port: 6379)
```

## 段階的開発計画 
```md
Phase 1: 基本的なチャンネル登録・動画表示
Phase 2: 時間制限機能
Phase 3: 検索機能・UI改善
Phase 4: パフォーマンス最適化
```
